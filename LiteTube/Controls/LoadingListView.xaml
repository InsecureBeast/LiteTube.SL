<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:LiteTube.Converters"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:interactivity="clr-namespace:LiteTube.Interactivity"
    xmlns:common="clr-namespace:LiteTube.Common">

    <DataTemplate x:Key="CategoryItemTemplate">
        <Border Height="100"
              Width="370"
              x:Name="Border"
              Margin="0,0,0,10"
              Background="{StaticResource PhoneSecondaryBackgroundBrush}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Title}" 
                            Grid.Column="0"
                            TextWrapping="Wrap" 
                            TextTrimming="WordEllipsis"
                            FontSize="28"
                            FontWeight="Light"
                            VerticalAlignment="Center"
                            Margin="20,0,0,0"
                            Foreground="{StaticResource PhoneSubtleBrush}"/>
                <Border Grid.Column="1"
                        Margin="20"
                        Width="55"
                        Height="55"
                        VerticalAlignment="Center"
                        Visibility="{Binding Image, Converter={StaticResource StringToVisibilityConverter}}">
                    <Image Source="{Binding Image}"/>
                </Border>

            </Grid>
        </Border>
    </DataTemplate>
    
    <DataTemplate x:Key="LoadingListView" >
        <Grid x:Name="ContentRoot">
            <Grid>
                <toolkit:LongListMultiSelector Margin="-12,0,0,10" 
                                           ItemsSource="{Binding Items}"
                                           IsSelectionEnabled="False"
                                           EnforceIsSelectionEnabled="False"
                                           
                                           toolkit:TiltEffect.IsTiltEnabled="True" 
                                           common:ItemClickCommand.Command="{Binding ItemClickCommand}">
                    <!--<i:Interaction.Behaviors>
                        <interactivity:LoadItemsByScrollBehavior IsEnabled="True"
                                                                 LoadMoreCommand="{Binding LoadMoreCommand}"/>
                    </i:Interaction.Behaviors>-->

                    <toolkit:LongListMultiSelector.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,0,0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="0" 
                                      HorizontalAlignment="Left"
                                      Background="DimGray"
                                      Height="100"
                                      Width="178">

                                    <Image Source="{Binding ImagePath}" 
                                           Stretch="UniformToFill" />

                                    <Border Margin="2"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Right"
                                            Background="Black"
                                            Padding="4,0,4,0">
                                        <TextBlock Text="{Binding Duration, Converter={StaticResource ResourceKey=TimeSpanFormatConverter}}" 
                                                   TextWrapping="NoWrap" 
                                                   Foreground="White"
                                                   FontSize="14"/>
                                    </Border>
                                </Grid>

                                <StackPanel Grid.Column="1" 
                                            Margin="0,0,0,0">
                                    <TextBlock Text="{Binding Title}" 
                                               Style="{StaticResource PhoneTextNormalStyle}"
                                               TextTrimming="WordEllipsis"
                                               TextWrapping="Wrap"
                                               MaxHeight="54"/>
                                    <TextBlock Text="{Binding ChannelTitle}" 
                                               Style="{StaticResource PhoneTextSmallStyle}"
                                               TextWrapping="NoWrap"/>
                                    <TextBlock TextWrapping="NoWrap"
                                               Text="{Binding PublishedAt}"
                                               Style="{StaticResource PhoneTextSmallStyle}">
                                    <Run Text="Published at " x:Uid="PublishedAt"/>
                                    <Run Text="{Binding PublishedAt}" />
                                    </TextBlock>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </toolkit:LongListMultiSelector.ItemTemplate>
                </toolkit:LongListMultiSelector>
                <Grid x:Name="BlockMulti" 
                      Width="50" 
                      Background="Transparent" 
                      HorizontalAlignment="Left" 
                      Visibility="Visible"/>
            </Grid>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="Loading"
                       Text="Loading..."
                       Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="IsEmpty"
                       Text="Items not found"
                       Visibility="{Binding IsEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CategoryLoadingListView" >
        <Grid>
            <toolkit:LongListMultiSelector ItemsSource="{Binding CategoryItems}"
                                           ItemTemplate="{StaticResource CategoryItemTemplate}"
                                           toolkit:TiltEffect.IsTiltEnabled="True"
                                           common:ItemClickCommand.Command="{Binding ItemClickCommand}">
                <!--<i:Interaction.Behaviors>
                    <interactivity:LoadItemsByScrollBehavior IsEnabled="True"
                                                             LoadMoreCommand="{Binding LoadMoreCommand}"/>
                </i:Interaction.Behaviors>-->
            </toolkit:LongListMultiSelector>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="Loading"
                       Text="Loading..."
                       Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="IsEmpty"
                       Text="Items not found"
                       Visibility="{Binding IsEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="CommentsLoadingListView" >
        <Grid x:Name="ContentRoot">
            <ListBox ItemsSource="{Binding Comments}">
                <!--<i:Interaction.Behaviors>
                    <interactivity:LoadItemsByScrollBehavior IsEnabled="True"
                                                             LoadMoreCommand="{Binding LoadMoreCommand}"/>
                </i:Interaction.Behaviors>-->
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Image Source="{Binding AuthorProfileImageUrl}" 
                                   Stretch="UniformToFill"
                                   Height="45"
                                   Width="45"
                                   VerticalAlignment="Top"
                                   Margin="{Binding IsReplay, Converter={StaticResource CommentMarginConverter}}"/>

                            <StackPanel Grid.Column="1"
                                        Margin="8,0,0,0">

                                <StackPanel Orientation="Horizontal">
                                    <HyperlinkButton Content="{Binding AuthorDisplayName}"
                                                     Margin="0, -5,0,0"
                                                     Command="{Binding ChannelCommand}"
                                                     CommandParameter="{Binding AuthorChannelId}"/>
                                    <TextBlock TextWrapping="NoWrap"
                                               Text="{Binding PublishedAtRaw}"
                                               Margin="0,0,0,0"/>
                                </StackPanel>

                                <TextBlock Text="{Binding TextDisplay}" 
                                           Style="{StaticResource PhoneTextNormalStyle}"
                                           TextWrapping="Wrap"
                                           Margin="10,0,0,0"/>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>

                </ListBox.ItemTemplate>
            </ListBox>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="Loading"
                       Text="Loading..."
                       Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>

            <TextBlock HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       x:Uid="IsEmpty"
                       Text="Items not found"
                       Visibility="{Binding IsEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </Grid>
    </DataTemplate>
    
</ResourceDictionary>
